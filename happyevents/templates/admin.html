<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>#calendar { max-width: 900px; margin: 40px auto; }</style>
</head>
<body>
    <header>
        <h1>Admin Dashboard</h1>
        <nav>
            <a href="/">Home</a>
            <a href="/booking">Booking</a>
            <a href="/logout">Logout</a>
        </nav>
    </header>

    <section>
        <h2>Event Bookings Calendar</h2>
        <div id="calendar"></div>

        <h3>Booking List</h3>
        <table border="1" cellpadding="5" cellspacing="0">
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Event Type</th>
                <th>Date</th>
                <th>Time</th>
                <th>Action</th>
            </tr>
            {% for b in bookings %}
            <tr>
                <td>{{ b.id }}</td>
                <td>{{ b.name }}</td>
                <td>{{ b.event_type }}</td>
                <td>{{ b.date }}</td>
                <td>{{ b.time }}</td>
                <td><a href="{{ url_for('delete_booking', id=b.id) }}" onclick="return confirm('Are you sure?')">Delete</a></td>
            </tr>
            {% endfor %}
        </table>
    </section>

    <footer>
        <p>Â© Happy Events </p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                events: '/api/bookings',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay'
                }
            });
            calendar.render();
        });
    </script>
</body>
</html>
